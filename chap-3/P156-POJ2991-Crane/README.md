# クレーン
セグメント木で考えます。  
根ノードはクレーン全体を連結した左から右端までを受け持ち、その左の子ノードはクレーンのインデックス0番からn/2番未満まで、右の子ノードはクレーンのn/2番からn番未満までを受け持ちます。  
そして、各ノードは、受け持ちのクレーンの左端が、座標(0,0)で、水平な地面に垂直に立っていると考えて、右端の座標と、右端のさらに右につながる、クレーンの角度を保持します。この角度もまた、そのクレーンの左端が地面に垂直なときを0度としてカウントしています。  
(角度は、そのノード自身の角度じゃないことに注意！)  
あとはクエリを一個ずつ処理していきます。セグメント木を辿って座標と角度を更新していけばよいです。  
  
蟻本のソースコードはすごくわかりにくいときあってヒイヒイです。  
コメントが多めについてる時もあるんですが。  

#  参考
<http://mayokoex.hatenablog.com/entry/2015/08/17/203301>

